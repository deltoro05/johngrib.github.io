---
layout  : wiki
title   : 결혼 생활과 public node로만 이루어진 network 문제
summary : 연결에 제약을 가한 네트워크로 가족 갈등을 예방한다
date    : 2020-02-14 21:17:30 +0900
updated : 2020-02-15 11:05:04 +0900
tag     : love problem network
resource: 11/955BB8-9B9A-4667-9F46-8388EAC21C14
toc     : true
public  : true
parent  : [[/hack]]
issue-number : 159
latex   : true
---
* TOC
{:toc}

## 제약 없는 public node의 문제

결혼 전, 우리 커플은 기혼 커플의 가족 갈등 문제에 대해 고민하다 이 문제가 일종의 네트워크 문제라는 사실을 깨달았다.

예를 들어 전화번호를 설계의 핵심으로 전제하고, 서로 전화를 걸 수 있는 관계를 아주 단순하게 그려보면 다음과 같은 그림이 나온다.

![처음에 생각한 전화 관계도]( /resource/wiki/global-variables-and-marriage-architecture/simple-complex.png )

**각 노드는 다른 모든 노드에 카톡을 보낼 수 있다.**

$$n$$개의 노드가 있을 때 모든 노드가 서로 연결된다면 연결의 수는 $$\frac{n ( n-1 )}{2}$$ 이라는 점을 생각해볼 수 있다.

즉 이러한 가족 네트워크의 복잡도는 참여하는 가족 구성원(노드)의 수의 제곱에 비례하게 된다.

John 과 Loui 의 실제 가족 구성원을 생각해보면, 만약 두 사람이 결혼하고 전화번호를 충분히 주고받는다면 다음과 같은 그림이 나오게 될 수도 있다.

![최악의 경우]( /resource/wiki/global-variables-and-marriage-architecture/real-complex.png )

모든 노드가 연결된 것은 아니지만, 이 정도의 복잡도만 되어도 우리 부부의 비중이 상당히 줄어들기 때문에 John 노드와 Loui 노드로 날아드는 리퀘스트를 적절하게 컨트롤하기 힘들다.
뿐만 아니라 한국의 사회 문화적 특성상 Loui 노드로 전달되는 리퀘스트의 수가 John 노드로 전달되는 리퀘스트의 수보다 훨씬 많을 것이다.

## 문제 해결을 위한 설계

우리 부부는 이러한 복잡도를 효율적으로 컨트롤할 수 있는 네트워크를 설계한 다음 그것을 실천해야만 스트레스 부하가 적은 결혼 생활이 될 수 있을 것이라 예측했다.

따라서 우리 부부는 다음과 같은 구조를 구상하였다.

![간단하게 최적화한 구조]( /resource/wiki/global-variables-and-marriage-architecture/simple-optimized.png )

이 구조는 혈족 1촌 이하의 관계에 한해서 메시징을 허용한다.

* Loui $$\leftrightarrow$$ John
* John 의 부모 $$\leftrightarrow$$ John
* Loui 의 부모 $$\leftrightarrow$$ Loui

그러나 그 외의 관계에서의 메시징은 허용하지 않는다.

* John 의 부모 $$\nleftrightarrow$$ Loui
    * John 의 부모와 Loui 는 서로에게 메시지(전화, 카톡)를 보낼 수 없다.
* Loui 의 부모 $$\nleftrightarrow$$ John
    * Loui 의 부모와 John 은 서로에게 메시지(전화, 카톡)를 보낼 수 없다.

## 실제 가족 관계에 적용된 그림

실제 가족 관계를 생각하면 이 구조는 다음과 같은 모양을 갖게 된다.

![실제 가족 관계를 반영한 구조]( /resource/wiki/global-variables-and-marriage-architecture/real-optimized.png )

이런 제약이 가해진 네트워크 구조의 장점은 다음과 같다.

* John 은 Loui 의 가족 네트워크에서 발생한 메시지와 그 정보 구조를 상대적으로 덜 고려해도 된다.
* John 의 가족 네트워크에서 발생한 메시지는 John 에 의해 적절히 필터링되어 Loui 에게 전달된다.
    * John 은 모든 메시지를 Loui 에게 전달하지 않는다.
    * John 은 Loui 의 협력이 필요한 메시지를 처리할 때 Loui 에게 John 이 가공한 메시지를 전달한다.

물론 다른 쪽의 입장도 똑같다.

* Loui 는 John 의 가족 네트워크에서 발생한 메시지와 그 정보 구조를 상대적으로 덜 고려해도 된다.
* Loui 의 가족 네트워크에서 발생한 메시지는 Loui 에 의해 적절히 필터링되어 John 에게 전달된다.
    * Loui 는 모든 메시지를 John 에게 전달하지 않는다.
    * Loui 는 John 의 협력이 필요한 메시지를 처리할 때 John 에게 Loui 가 가공한 메시지를 전달한다.

## 실천 원칙과 경험

우리 부부는 이러한 구조를 현실 세계에서 구현하기 위해 다음과 같이 실행하였다.

### 전화번호 관리

* 배우자의 전화번호를 결혼 전(2015년)부터, 결혼(2016년) 후 일정 기간이 지날 때까지(2017년까지) 부모님에게 알려주지 않았다.
* 결혼 후 4년차가 된 지금은 각 노드에 전화번호가 유출되었으나, 네트워크 전체에 메시지를 크로싱하여 연락하지 않는 습관이 생성된 상태이기 때문에 네트워크의 제약이 잘 유지되고 있다.
    * 현재 전화번호는 각 노드가 (비상 용도 등으로) 암묵적으로 알고만 있을 뿐 메시지 전달 경로를 각자 숙지하고 있다.

### 집 주소 관리

전화나 카톡 같은 OSI 7 계층을 모두 거치는 메시징 차단을 아무리 잘 해놓아도, 물리 레이어에서 접근이 발생할 수 있다.

따라서 결혼 후 2년이 지날 때까지 서로의 부모에게 집 주소를 알려주지 않았다. 부모님의 방문은 그 이후부터 지금까지 각 1회씩 있었다.

### 존댓말 사용

네트워크 메시징에 있어 well formed 메시징은 대단히 중요하다.

우리 부부는 항상 서로에게 존댓말을 사용한다.


## 결혼 4년차 회고

### John

* 서로에게 집중할 수 있는 것이 좋았다.
    * 가족들 사이의 관계에 대한 고민보다 부부 사이의 관계에 주로 신경쓸 수 있는 면이 좋았다.
* 가족들의 메시지를 서로에게 전달하기 위해 적절히 필터링하고 편집할 때마다 서로를 보호해주는 부부가 된 느낌이 들어 좋았다.
* 그냥 살아가면서 사랑한다고 생각하는 것보다, 서로를 위해 생각하면서 적극적으로 사랑하는 느낌을 경험할 수 있었다.
* 적절한 캡슐화가 실제 세계에서도 복잡도를 낮춘다는 것을 배울 수 있었다.
* 결혼 4년차에 이르기까지 부부싸움이 1차례도 없었다.
* 행복하다. Loui 를 더 사랑하게 되었다.

### Loui

* 메시지로 인한 오해, 피로가 없다.
    * 메시지의 진의를 해석하기 위해 고민하지 않아도 된다는 점이 좋았다.
    * 메시지를 오해 없이 재전달하거나 협의하고, 재해석하고 결론을 내는 불필요한 과정이 사라져 논쟁이 예방되었다.
* 가족들의 메시지 전달 욕구보다 서로의 평온과 안정을 더 우선시하는 배우자에 대해 신뢰가 강화되었다.
* 가족들이 이 관계를 이해하지는 못해도 인정하게 되었다.
    * 그리고 다른 다양한 상황에서도 우리 부부에 대해 유사한 규칙을 적용하게 되었다.
* 평화롭다. John 을 더 사랑하게 되었다.

## 함께 읽기

* [[our-fund-balancing]]{사람에겐 얼마만큼의 통장 잔고가 필요한가?}

