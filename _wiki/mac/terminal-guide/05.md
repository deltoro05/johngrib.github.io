---
layout  : wiki
title   : macOS 초보를 위한 터미널 사용 가이드 - Week 05
summary : 작성중인 문서
date    : 2024-01-28 17:11:27 +0900
updated : 2024-02-03 00:27:57 +0900
tag     : 
resource: C4/932849-9A11-48D8-95A6-E3CB578ADD61
toc     : true
public  : true
parent  : [[/mac/terminal-guide]]
latex   : false
---
* TOC
{:toc}

- 이전 문서: [[/mac/terminal-guide/04]]
- 다음 문서: /mac/terminal-guide/06

## BASH 프롬프트 커스터마이징

>
이번 섹션은 [[/cmd/bash]] 사용자를 위한 것입니다. [[/cmd/zsh]] 사용자는 건너뛰어도 됩니다.
{:style="background-color: #ecf1e8;"}

이번에는 프롬프트를 커스터마이징해보죠.

먼저 내가 어느 셸을 사용하고 있는지 확인해 봅시다.

```
echo $0
```

[[/cmd/zsh]]을 사용하고 있다면 다음과 같이 나올 겁니다.

```
$ echo $0
zsh
```

[[/cmd/bash]]를 사용하고 있다면 이렇게 나올 거고요.

```
$ echo $0
bash
```

이 섹션은 [[/cmd/bash]] 셸 사용자의 프롬프트 커스터마이즈를 다룹니다.
[[/cmd/zsh]] 사용자는 이 섹션을 건너뛰어도 됩니다.

그러나 [[/cmd/zsh]]를 사용하고 있더라도 이 섹션을 따라해보고 싶다면 다음과 같이 [[/cmd/bash]] 서브셸을 실행한 다음 진행하면 됩니다.

```
bash
```

### PS1

[[/cmd/bash]]는 많은 (환경) 변수들을 갖고 있는데 [[/cmd/bash/parameters#prompt]]{PS1}은 우리가 터미널을 사용하며 많이 보게 되는 프롬프트와 관련된 변수입니다.

시험삼아 나의 `PS1`이 어떻게 설정되어 있는지 확인해 보도록 합시다.

```
echo $PS1
```

저는 평소 사용하던 프롬프트를 이 가이드를 작성하기 위해 잠시 디폴트 설정으로 바꿔놓은 상태입니다.
그래서 다음과 같이 나왔습니다.

```
JohnGrib-Macmini:dotfiles johngrib$ echo $PS1
\h:\W \u$
```

출력된 내용은 다음을 의미합니다.

- `\h`: 호스트 이름 (여기서는 `JohnGrib-Macmini`)
- `:`: 구분 기호로 집어넣어준 것
- `\W`: 작업 디렉토리 이름 (여기서는 `dotfiles`)
- `\u`: 로그인한 사용자 이름 (여기서는 `johngrib`)
- `$`: 프롬프트 종결 기호로 집어넣어준 것

이 `PS1` 변수를 변경해주면 프롬프트가 바뀌게 되어 있습니다.

다음 명령을 입력하면 `PS1` 변수를 변경할 수 있습니다.

```
PS1="hello prompt $"
```

명령을 입력하고 나면 바로 다음 줄부터 프롬프트가 `hello prompt $`로 바뀌게 됩니다.

```
JohnGrib-Macmini:dotfiles johngrib$ PS1="hello prompt $"
hello prompt $
```

### PS1에 날짜와 시간 넣기 {#ps1-datetime}

이번에는 프롬프트에 오늘 날짜와 시간이 나오도록 해봅시다.
[[/cmd/date]]를 사용해 보도록 하죠.

```
date '+%Y-%m-%d-%a %T'
```

```
hello prompt $date '+%Y-%m-%d-%a'
2024-01-29-Mon 23:25:24
```

년월일, 요일과 시간까지 잘 나오네요.

이 명령을 다음과 같이 `PS1`에 넣어주면 프롬프트에 오늘 날짜가 나오게 됩니다.

```
PS1="\$(date '+%Y-%m-%d-%a %T') $"
```

```
hello prompt $PS1="\$(date '+%Y-%m-%d-%a %T') $"
2024-01-29-Mon 23:26:30 $
2024-01-29-Mon 23:26:32 $
2024-01-29-Mon 23:26:33 $
2024-01-29-Mon 23:26:33 $
```

`PS1`에 날짜를 넣어고 여러번 엔터를 입력한 결과입니다.
시간이 흐르는 것을 프롬프트를 통해 알 수 있게 되었습니다.

프롬프트에 시계가 있으면 시간이 오래 걸린 이전 명령이 언제 끝났는지를 프롬프트를 통해 알 수 있다는 장점도 있습니다.

다음은 `sleep` 명령을 써서 일부러 5초간 기다리도록 해 본 것입니다.

```
2024-01-29-Mon 23:29:47 $sleep 5
2024-01-29-Mon 23:29:53 $
```

명령이 끝난 이후 곧바로 다음 프롬프트가 출력되므로, 명령이 끝난 시간이 `23:29:53`이라는 것을 알 수 있습니다.

이 예제에서는 5초라는 짧은 시간이었지만, 가끔은 아주 오래 걸리는 명령을 실행할 때도 있습니다.
화장실을 다녀오거나 커피를 마시고 온 다음 "아 이게 16분 걸렸구나" 하고 알 수 있다면, 다음번에 실행할 때에는 이전 소요 시간을 참고할 수 있을 것입니다.

### 팁: 명령이 끝나면 알림 받기 {#tip-notify}

이건 프롬프트와는 상관없는 것이긴 한데... `sleep` 명령을 소개하고 보니 이 팁을 여기에 넣으면 재미있을 것 같아서 넣어봅니다.

다음 명령을 실행해 봅시다.

```
osascript -e 'display notification "Hello, World!" with title "터미널 알림"'
```

그러면 모니터 오른쪽 위에 다음과 같은 알림이 나타나게 됩니다.

![]( /resource/C4/932849-9A11-48D8-95A6-E3CB578ADD61/oascript-example.jpg )

이 명령은 macOS 컴퓨터에서 작동하는 애플스크립트를 실행해 줍니다.
(애플스크립트에 대해 학습하는 건 이 가이드의 목적에서 꽤 벗어나기 때문에 굳이 자세히 설명하지는 않겠습니다.)

이제 위에서 사용했던 `sleep` 명령 뒤에 세미콜론을 하나 추가하고, 이 명령을 붙여서 실행해 봅시다.

```
sleep 5; osascript -e 'display notification "Hello, World!" with title "터미널 알림"'
```

이렇게 하면 앞의 명령(`sleep 5`)이 끝나고 나서 뒤의 명령(`osascript ...`)이 실행되게 됩니다.

오래 걸리는 명령을 실행하고 나서 웹서핑 같은 걸 하고 있다가 화면 오른쪽 위에 알림이 뜨면, 명령이 끝났다는 걸 알 수 있게 될 테니 터미널로 돌아가서 하던 작업을 이어서 하면 됩니다.


### PS1에 작업 디렉토리 넣기 {#ps1-pwd}

이제 다시 `PS1` 작업으로 돌아갑시다. 이번에는 작업 디렉토리를 프롬프트에 넣어보도록 하죠.

작업 디렉토리를 확인하는 쉬운 방법은 `pwd` 명령을 사용하는 것과 `$PWD` 변수를 출력하는 것입니다.

```
2024-01-31-Wed 22:30:17 $pwd
/Users/johngrib/johngrib.github.io
```

```
2024-01-31-Wed 22:30:52 $echo "$PWD"
/Users/johngrib/johngrib.github.io
```

둘 중에 무엇을 써도 상관없지만 위에서 [[/cmd/date]]를 사용했으니 이번에는 변수를 사용해 보도록 하겠습니다.

```
PS1="\$(date '+%Y-%m-%d-%a %T') \$PWD $ "
```

이제 다음과 같이 작업 디렉토리도 표시되게 되었습니다.

```
2024-01-31-Wed 22:31:20 $PS1="\$(date '+%Y-%m-%d-%a %T') \$PWD $ "
2024-02-02-Fri 23:51:08 /Users/johngrib/johngrib.github.io $ 
```

그런데 작업 디렉토리 경로가 좀 길군요.

`$HOME` 경로를 `~`로 줄여서 표시하면 좀 더 깔끔해 보일 것 같습니다.
(`~`는 `$HOME` 경로로 확장되는 특수한 문자입니다. 이런 확장에 대해서는 나중에 자세히 설명하겠습니다.)

이제 `PS1`의 `$PWD`를 사용한 곳을 다음과 같이 바꿔 봅시다.

```
PS1="\$(date '+%Y-%m-%d-%a %T') \w $ "
```

`\w`는 `$PS1` 해석기가 현재 작업 디렉토리를 표시하도록 하는 특수한 문자입니다.

이제 다음과 같은 프롬프트가 나타나게 됩니다.

```
2024-02-02-Fri 23:51:08 ~/johngrib/johngrib.github.io $ 
```

이제 프롬프트가 꽤 길어졌기 때문에 명령을 입력하는 커서가 화면 왼쪽에서 꽤 멀어졌습니다.

그래서 저는 마지막의 `$` 앞에 `\n`을 넣어서 명령 입력 커서가 다음 줄에 나오도록 설정하는 것을 좋아합니다.

```
2024-02-03-Sat 00:23:59 ~/johngrib.github.io $ PS1="\$(date '+%Y-%m-%d-%a %T') \w \n$ "
2024-02-03-Sat 00:27:05 ~/johngrib.github.io
$
```





작성중입니다....

