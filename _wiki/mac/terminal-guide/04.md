---
layout  : wiki
title   : macOS 초보를 위한 터미널 사용 가이드 - Week 04
summary : 작성중인 문서
date    : 2024-01-21 21:53:46 +0900
updated : 2024-01-22 23:45:43 +0900
tag     : 
resource: F4/5E14F8-0E28-44FE-9C80-63014FBE8851
toc     : true
public  : true
parent  : [[/mac/terminal-guide]]
latex   : false
---
* TOC
{:toc}

- 이전 문서: [[/mac/terminal-guide/03]]
- 다음 문서: /mac/terminal-guide/05

## grep 명령

[[/cmd/grep]]은 1970년대 초부터 여태까지 수많은 사람들에 의해 사용되고 발전을 거듭해 온 유서깊은 프로그램입니다.
[[/cmd/grep]]을 처음 개발한 사람은 Ken Thompson입니다.

[[/people/brian-w-kernighan]]에 의하면 `grep`이라는 이름은 `ed`의 `g/re/p` 명령에서 왔다고 합니다.
(`ed`도 Ken Thompson이 개발한 프로그램입니다.)

이 가이드의 대상 플랫폼인 macOS에서는 오래된 버전의 BSD 유닉스에 들어있던 [[/cmd/grep]]이 설치되어 있습니다.
그래서 GNU [[/cmd/grep]]과는 몇 가지 옵션이나 기능, 성능 등에 차이가 있습니다.

[[/cmd/grep]]을 잘 쓰려면 GNU [[/cmd/grep]]과 BSD [[/cmd/grep]] 사이에서 서로 호환되는 옵션이 무엇인지를 알면 좋습니다.
그리고 3 종류의 정규식 문법(BRE, ERE, PCRE) 중 필수적으로 ERE, 좀 더 욕심내서 PCRE를 다룰 수 있으면 좋습니다.

### 기본적인 사용법 {#bsd-basic-usage}

GNU [[/cmd/grep]]에 대해서는 좀 미뤄두고 일단은 macOS에 기본으로 설치되어 있는 BSD [[/cmd/grep]]에 대해서만 기본적인 사용법을 익혀 봅시다.

먼저 `grep --version`으로 버전을 확인해 봅시다. 제 컴퓨터에서는 다음과 같이 나오네요.

```
$ grep --version
grep (BSD grep, GNU compatible) 2.6.0-FreeBSD
```

[[/cmd/grep]]의 기본 문법은 다음과 같습니다.

```
grep 옵션 검색패턴 파일이름1 파일이름2 파일이름3 ...
```

오른쪽에 파일 이름이 '수평 리스트'로 줄줄이 이어지는 것을 보고
[[/mac/terminal-guide/03#xargs]]{지난 주에 공부한} [[/cmd/xargs]]를 떠올릴 수 있다면 점점 터미널 사용에 익숙해지고 있다는 뜻입니다.

물론 떠올리지 못했어도 괜찮습니다.

UNIX 셸 명령들은 이렇게 마지막에 여러 파일의 이름을 나열하는 방식으로 돌아가는 것들이 많습니다.
그래서 자꾸 쓰다 보면 리스트가 뒤에 오는 방식에 익숙해집니다.

`/usr/share/dict/words` 파일은 컴퓨터에 기본적으로 내장되어 있는 영어사전입니다.

```
$ wc -l /usr/share/dict/words
235976 /usr/share/dict/words
```

단어가 235976개나 들어있네요. 이 파일을 대상으로 [[/cmd/grep]] 사용을 연습해 봅시다.

`study` 단어를 찾아보겠습니다.

```
$ grep study /usr/share/dict/words
afterstudy
forestudy
outstudy
overstudy
prestudy
restudy
study
understudy
```

여러 파일을 지정할 수 있었다는 것을 기억하고 계실 것입니다.
그러니 이번에는 2개의 파일을 지정해서 `study` 단어를 찾아보겠습니다.

```
$ grep study /usr/share/dict/words /usr/share/dict/web2
/usr/share/dict/words:afterstudy
/usr/share/dict/words:forestudy
/usr/share/dict/words:outstudy
/usr/share/dict/words:overstudy
/usr/share/dict/words:prestudy
/usr/share/dict/words:restudy
/usr/share/dict/words:study
/usr/share/dict/words:understudy
/usr/share/dict/web2:afterstudy
/usr/share/dict/web2:forestudy
/usr/share/dict/web2:outstudy
/usr/share/dict/web2:overstudy
/usr/share/dict/web2:prestudy
/usr/share/dict/web2:restudy
/usr/share/dict/web2:study
/usr/share/dict/web2:understudy
```

파일이 두 개가 되니 검색 결과에서 어떤 파일에서 찾았는지도 함께 표시되는 것을 볼 수 있습니다.
다음과 같은 형식입니다.

```
찾은파일이름:찾은단어
```

물론 [[/cmd/grep]]이 표준입력(`0`)으로 들어오는 텍스트를 읽어서 처리하게 하고 싶다면 단순하게 파이프 `|`를 사용하면 됩니다.

```
$ seq 30 | grep 4
4
14
24
```

- `seq 30`: 1부터 30까지를 출력
- `grep 4`: 4가 포함되어 있는 줄만 출력

#### -o 옵션 {#o-option}

`-o` 옵션을 주면 매치된 문자열만 출력해 줍니다.

```
$ seq 3000 | grep 444
444
1444
2444

$ seq 3000 | grep 444 -o
444
444
444
```

`-o` 옵션이 없을 때에는 1부터 3000까지의 숫자 중에서 444와 매치된 '줄'을 출력했습니다.

그러나 `-o` 옵션을 주면 444와 매치된 '문자열'만을 출력합니다.

#### -v 옵션

작성중입니다...
