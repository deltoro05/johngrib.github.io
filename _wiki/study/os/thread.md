---
layout  : wiki
title   : thread
summary : 
date    : 2023-07-08 23:49:21 +0900
updated : 2023-07-09 09:12:29 +0900
tag     : 
resource: 4A/9FA429-666F-4B23-8C33-B5EC8EE51CFC
toc     : true
public  : true
parent  : [[/study/os]]
latex   : false
---
* TOC
{:toc}

## 용어에 대하여

>
(전략) 이번 장에서는 프로세스의 내부로 들어가서, 하나의 프로세스의 환경 안에서 여러 개의 제어 가닥(thread of control)들을 이용해서 여러 개의 과제들을 수행하는 방법을 살펴본다.
그러한 제어 가닥 또는 한 줄기의 실행 흐름을 스레드(thread)라고 부른다.
한 프로세스 안의 모든 스레드는 동일한 프로세스 구성요소들(파일 서술자, 메모리 등)을 공유한다.
[^unix-471]

## From: 멀티프로세서 프로그래밍

>
다중프로세서는 복수의 하드웨어 프로세서로 구성되며, 각 프로세서는 순차적인 프로그램을 실행한다.
다중프로세서 아키텍처에 관해 다룰 때, 시간의 기본 단위는 사이클이다.
사이클은 프로세서가 하나의 명령어를 가져와서 실행하는 데 걸리는 시간이다.
절대적인 용어로, 사이클 시간은 기술이 발전함에 따라 변화한다(1980년에는 초당 천만 사이클이었고, 2005년에는 30억 사이클이었다).
그리고 플랫폼에 따라 차이가 있다(토스터를 제어하는 프로세서는 웹 서버를 제어하는 프로세서보다 더 긴 사이클을 갖는다).
그러나 메모리 접근과 같은 명령어의 상대적인 비용은 사이클로 표현했을 때 천천히 변화한다.
>
스레드(thread)는 순차 프로그램이다.
프로세서가 하드웨어 장치이듯이, 스레드는 소프트웨어 구조다.
프로세서는 한 동안 스레드를 실행하고, 이를 비켜두고 다른 스레드를 실행하며, 이 이벤트를 문맥 교환(context switch)이라 부른다.
프로세서는 스레드를 옆에 비켜둘 수 있으며, 혹은 스케줄러에서 나오며(deschedule), 이에는 다양한 이유가 있을 수 있다.
스레드가 완료되려면 시간이 걸리는 메모리 요청을 했다거나, 혹은 스레드가 충분히 길게 실행되어 다른 스레드가 실행될 때라거나 할 수 있다.
스레드가 스케줄러에서 나오면, 다른 프로세서에서 다시 재개할 수도 있다.
[^art-of-616]

## From: UNIX 고급 프로그래밍

>
**스레드와 스레드 ID**
>
일반적으로 하나의 프로세스에는 제어의 줄기가 하나만 존재한다.
즉, 일단의 기계어 명령들이 한 번에 하나씩 실행된다.
그러나 문제의 서로 다른 부분을 여러 개의 제어 줄기로 처리할 때 더 풀기 쉬워지는 문제들도 있다.
또한 제어의 줄기가 여러 개이면 다중 프로세서 시스템에서 가능한 병렬성을 활용할 수 있게 된다.
그러한 제어의 줄기를 스레드(thread)라고 부른다.
>
한 [[/study/os/process]]{프로세스}의 모든 스레드는 동일한 주소 공간과 파일 서술자들, 스택들, 프로세스 관련 특성들을 공유한다.
각 스레드는 자신만의 스택에서 실행되나, 모든 스레드는 자신과 같은 프로세스에 속한 다른 스레드의 스택에 접근할 수 있다.
스레드들이 같은 메모리에 접근할 수 있기 때문에, 일관성이 깨지지 않게 하려면 공유 자료에 대한 여러 스레드들의 접근을 동기화할 필요가 있다.
>
프로세스처럼 스레드도 ID로 식별한다.
그러나 스레드 ID들은 한 프로세스 안에서만 유효하다.
즉, 한 프로세스의 스레드 ID는 다른 프로세스에서는 아무런 의미도 없다.
스레드 ID는 프로세스 안에서 스레드들을 다룰 때 특정 스레드를 지칭하는 용도로 쓰인다.
>
스레드를 제어하는 함수들은 프로세스를 제어하는 데 쓰이는 함수들과 비슷하다.
그러나 스레드가 프로세스 모형이 확립되고 한참 후에 UNIX 시스템에 추가되었기 때문에, 스레드 모형과 프로세스 모형에는 다소 까다로운 상호작용이 존재한다.
[^unix-17]

## 참고문헌

- UNIX 고급 프로그래밍 [제3판] / 리처드 스티븐스, 스티븐 레이고 공저 / 류광 역 / 퍼스트북 / 인쇄일: 2014년 08월 28일 / 원제: Advanced Programming in the UNIX Environment
- 멀티프로세서 프로그래밍 / 모리스 헐리히, 니르 샤비트 공저 / 김진욱, 하재승 공역 / 한빛미디어 / 초판발행 2009년 07월 16일 / 원제: The Art of Multiprocessor Programming

## 주석

[^art-of-616]: 멀티프로세서 프로그래밍. B.2장. 616쪽
[^unix-17]: UNIX 고급 프로그래밍. 1.6장. 17쪽
[^unix-471]: UNIX 고급 프로그래밍. 11.1장. 471쪽.

